<p id="notice"><%= notice %></p>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-3">
    </div>

    <div class="col-md-3">
      <%=image_tag @product.photo , :class => "mainphoto"%>
      <p>
      <%= link_to 'Edit', edit_product_path(@product) %> |
      <%= link_to 'Back', products_path %>
      </p>
    </div>

    <div class="col-md-3">
          <hr>
            <p> <strong>Description:</strong> <br>
                <%= @product.description %> </p>
          <hr>

      <!-- price -->
            <p> <strong>Price:</strong> <br>
              <%= number_to_currency(@product.price, unit: "$") %>
            </p>
        <!-- form-with -->
       <%= form_for(@cart_item) do |f| %>
              <!-- <div class="row"> -->
                  <div class="form-group">
                    <%= f.label :quantity %>
                    <%= f.number_field :quantity , min:"0"%>
                      <!-- getting the product_id and passing to the cartitem-->
                    <%= f.hidden_field :product_id, value: @product.id %>
                  </div>
                  <div class="form-group">
                    <%= f.submit'add to cart', :class => 'btn btn-primary' %>
          </div>
        <% end %>

        <hr>
        <hr>
        <br>
        <!-- average-raview -->
          <div class="average_review">
            <div class="row">
                  <div class="col-md-5">
                      <strong>Average Rating: <%= @average_review %> </strong> <br>
                      <div class="average_review_rating" data-score=<%= @average_review %> </div>
                  </div>
                  <div>
                    <p> <span class="number-of-reviews"> <em> From: </em> <%= @product.reviews.count %> reviews </span></p>
                  </div>
              </div>
                <div class="col-md-7">
                  <br>
                 <%= link_to "Add customer reviews", new_product_review_path(@product), class: "btn btn-secondary"  %>
               </div>
           </div>
      </div>
  </div>

          <div class="col-md-3"> </div>
    </div>
  </div>


<!-- review -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-3">
      </div>
      <div class="col-md-6">
      <hr>
      <div class="reviews">
          <strong>Review:</strong><br>
          <%= render @product.reviews %>
      </div>

      </div>
      <div class="col-md-3"> </div>
  </div>
  </div>




<script>
  $('.review-rating').raty({
    readOnly: true,
    score: function(){
       return $(this).attr('data-score');
    },
    path: '/assets/'
  });

    $('#rating-form').raty({
      path: '/assets/',
      scoreName: 'review[rating]'
    });
</script>

<script>
  $('.average_review_rating').raty({
    readOnly: true,
    score: function(){
       return $(this).attr('data-score');
    },
    path: '/assets/'
  });
</script>
